L.TileLayer.Canvas=L.TileLayer.extend({_delay:null,createCanvas:function(e,t,a){let n;const i=e.getContext("2d"),{x:s,y:l}=this.getTileSize();e.width=s,e.height=l;const c=new Image;c.onload=()=>{try{i.drawImage(c,0,0),e.complete=!0}catch(e){n=e}finally{a(n,e)}},c.src=this.getTileUrl(t),c.crossOrigin="anonymous"},createTile:function(e,t){const{timeout:a}=this.options,n=document.createElement("canvas");return a?(this._delay&&clearTimeout(this._delay),this._delay=setTimeout(()=>{this.createCanvas(n,e,t)},a)):this.createCanvas(n,e,t),n}}),L.tileLayer.canvas=function(e,t){return new L.TileLayer.Canvas(e,t)};