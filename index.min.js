"use strict";L.TileLayer.Canvas=L.TileLayer.extend({_delays:{},_delaysForZoom:null,createCanvas:function(e,t,a){var s,i=e.getContext("2d"),o=this.getTileSize(),n=o.x,r=o.y;e.width=n,e.height=r;var l=new Image;l.onload=function(){try{i.drawImage(l,0,0),e.complete=!0}catch(e){s=e}finally{a(s,e)}},l.src=this.getTileUrl(t),l.crossOrigin="anonymous"},createTile:function(e,t){var a=this,s=this.options.timeout,i=e.z,o=document.createElement("canvas");return s?(i!==this._delaysForZoom&&(this._clearDelaysForZoom(),this._delaysForZoom=i),this._delays[i]||(this._delays[i]=[]),this._delays[i].push(setTimeout((function(){a.createCanvas(o,e,t)}),s))):this.createCanvas(o,e,t),o},_clearDelaysForZoom:function(){var e=this._delaysForZoom,t=this._delays[e];t&&(t.forEach((function(e,a){clearTimeout(e),delete t[a]})),delete this._delays[e])}}),L.tileLayer.canvas=function(e,t){return new L.TileLayer.Canvas(e,t)};